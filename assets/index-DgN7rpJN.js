var W=Object.defineProperty;var G=(e,t,o)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var f=(e,t,o)=>(G(e,typeof t!="symbol"?t+"":t,o),o);import{A as F,V as h,S as H,P as N,W as V,a as k,D as q,b as j,c as K,M as U,d as X,G as Y,C as z,e as $}from"./vendor-CywORp95.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const r=class r{constructor(t,o,n){this.model=o,t.add(this.model),this.mixer=new F(this.model),this.mixer.clipAction(n).play(),this.scale=p(.05,.1),this.model.scale.set(this.scale,this.scale,this.scale),this.mouseLocation=new h(0,0,-14.6),this.target=this.setRandomSwarmPoint(),this.model.position.copy(this.setRandomSwarmPoint()),this.speed=p(.9,1.1),this.targetRotation=this.calcDirection(),this.model.rotation.y=this.targetRotation}setRandomSwarmPoint(){const t=p(4,6),o=p(-Math.PI/4,Math.PI/4),n=p(0,2*Math.PI),i=this.mouseLocation.x+t*Math.cos(o)*Math.cos(n),s=this.mouseLocation.y+t*Math.sin(o),c=this.mouseLocation.z+t*Math.cos(o)*Math.sin(n);return new h(i,s,c)}moveToTarget(t){this.updateRotation();const o=this.target.clone().sub(this.model.position),n=o.length(),i=Math.min(1,Math.max(0,(n-r.slowRange)/(r.slowDownRange-r.slowRange))),s=y(i,1,r.slowScaler);this.mixer.update(t*this.speed*(s/r.slowScaler)/y(.4,1.5,this.scale*20-1));const c=r.baseSpeed*this.speed*t*s;n<c?(this.model.position.copy(this.target),this.target=this.setRandomSwarmPoint(),this.targetRotation=this.calcDirection()):this.model.position.add(o.normalize().multiplyScalar(c))}updateRotation(){const t=this.model.rotation.y,o=t-this.targetRotation;let n;o>0?n=y(t,this.targetRotation,.1):n=y(t,this.targetRotation-2*Math.PI,.1),this.model.rotation.y=n}updateMouseTarget(t){this.mouseLocation=t,this.target=this.setRandomSwarmPoint(),this.targetRotation=this.calcDirection()}calcDirection(){const o=this.target.clone().sub(this.model.position).normalize();return Math.atan2(o.x,o.z)}};f(r,"baseSpeed",8),f(r,"slowDownRange",14),f(r,"slowRange",7),f(r,"slowScaler",.4);let S=r;function p(e,t){return Math.random()*(t-e)+e}function y(e,t,o){return(1-o)*e+o*t}const u=new H,C=new N(75,window.innerWidth/window.innerHeight,.1,1e3),D=new V;D.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(D.domElement);const J=new k(2105376);u.add(J);const R=new q(16777215,.8);let b=new h(0,1,.2);R.position.copy(b);u.add(R);let w=[],d=[],P=[];for(let e=0;e<50;e++){const t=new j(l(.02,.05),6,6),o=g(16777062,16724736,Math.random());w.push(new K(o,1,3));const n=new h(l(-30,30),l(-20,20),l(-11,-17));w[e].position.copy(n),P.push(new h(l(-30,30),l(-20,20),l(-11,-17)));const i=new U({color:o});i.transparent=!0,i.opacity=0,d.push(new X(t,i)),d[e].position.copy(n),u.add(d[e]),u.add(w[e])}const Q=new Y;let m=[];for(let e=0;e<30;e++)Q.load("/birb.glb",function(t){const o=t.scene;t.animations[1],m.push(new S(u,o,t.animations[1]))},void 0,function(t){console.error(t)});C.position.z=5;function Z(e){const t=e.clientX/window.innerWidth*2-1,o=-(e.clientY/window.innerHeight)*2+1,n=.99,i=new h(t,o,n);i.unproject(C);for(let s=0;s<m.length;s++)m[s].updateMouseTarget(i)}window.addEventListener("click",Z,!1);const B=new $;let a=0;const L=26316,M=14514696,x=46;u.background=new z(L);function T(){requestAnimationFrame(T);const e=B.getDelta();if(m.length>0){a+=5*e,a>=140&&(a-=140);const t=a/140*2*Math.PI+Math.PI/2;b=new h(Math.sin(t),Math.cos(t),.2);let o=1;a<=20||a>=80?o=1:a<30?o=1-(a-20)/10:a>70?o=(a-70)/10:o=0,o+=.05,R.intensity=o*.7,R.position.copy(b),_();for(let n=0;n<d.length;n++){const i=P[n].clone().sub(d[n].position);i.length<1&&(P[n]=new h(l(-30,30),l(-20,20),l(-11,-17))),d[n].position.add(i.normalize().multiplyScalar(e)),w[n].position.add(i.normalize().multiplyScalar(e)),w[n].intensity=1-o,d[n].material.opacity=1.3-o,d[n].material.needsUpdate=!0}for(let n=0;n<m.length;n++)m[n].moveToTarget(e)}D.render(u,C)}T();function _(){let e;a<=10||a>=90?e=L:a<25?e=g(L,M,(a-10)/15):a<30?e=g(M,x,(a-25)/5):a>75?e=g(M,L,(a-75)/15):a>70?e=g(x,M,(a-70)/5):e=x,u.background=new z(e)}function g(e,t,o){const n=e>>16&255,i=e>>8&255,s=e&255,c=t>>16&255,v=t>>8&255,A=t&255,I=Math.round(n+(c-n)*o),E=Math.round(i+(v-i)*o),O=Math.round(s+(A-s)*o);return I<<16|E<<8|O}function l(e,t){return Math.random()*(t-e)+e}
